{"version":3,"sources":["webpack:///path---docs-core-file-upload-899baba61279cb3a94da.js","webpack:///./.cache/json/docs-core-file-upload.json"],"names":["webpackJsonp","404","module","exports","data","post","html","navDoc","edges","node","title","path","items","id","anchors","pathContext","current","prev","rootPath","next"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,KAAA,287BAAyp+BC,QAAWC,QAAUC,MAAQC,MAAA,mBAAAC,KAAA,eAAAC,QAA2DC,GAAA,QAAAH,MAAA,6CAAAI,QAAA,OAAmFD,GAAA,UAAAH,MAAA,iCAAAI,QAAA,UAA4EL,MAAQC,MAAA,oBAAAC,KAAA,OAAAC,QAAoDC,GAAA,QAAAH,MAAA,eAAAI,QAAA,OAAqDD,GAAA,kBAAAH,MAAA,kBAAAI,UAA6DD,GAAA,+BAAAH,MAAA,iCAA6EG,GAAA,oCAAAH,MAAA,sCAAuFG,GAAA,uBAAAH,MAAA,2BAA+DG,GAAA,gBAAAH,MAAA,gBAAAI,QAAA,OAA8DD,GAAA,aAAAH,MAAA,aAAAI,UAAmDD,GAAA,oCAAAH,MAAA,sCAAuFG,GAAA,yBAAAH,MAAA,2BAAiEG,GAAA,eAAAH,MAAA,iBAA6CG,GAAA,6CAAAH,MAAA,iDAA2GG,GAAA,gBAAAH,MAAA,2BAAAI,QAAA,OAAyED,GAAA,UAAAH,MAAA,UAAAI,UAA6CD,GAAA,uBAAAH,MAAA,yBAA6DG,GAAA,qBAAAH,MAAA,uBAAyDG,GAAA,0BAAAH,MAAA;AAAmEG,GAAA,uBAAAH,MAAA,2BAA+DG,GAAA,gBAAAH,MAAA,4BAAAI,UAAqED,GAAA,kBAAAH,MAAA,oBAAmDG,GAAA,wBAAAH,MAAA,0BAA+DG,GAAA,iDAAAH,MAAA,oDAAkHG,GAAA,6BAAAH,MAAA,+BAAyEG,GAAA,qDAAAH,MAAA,uDAAyHG,GAAA,iDAAAH,MAAA,mDAAiHG,GAAA,yDAAAH,MAAA,2DAAiIG,GAAA,kBAAAH,MAAA,oBAAmDG,GAAA,6CAAAH,MAAA,+CAAyGG,GAAA,yBAAAH,MAAA,2BAAiEG,GAAA,gCAAAH,MAAA,oCAAiFG,GAAA,aAAAH,MAAA,aAAAI,UAAmDD,GAAA,0BAAAH,MAAA,4BAAmEG,GAAA,4BAAAH,MAAA,8BAAuEG,GAAA,yCAAAH,MAAA,6CAAmGG,GAAA,SAAAH,MAAA,iBAAAI,UAAmDD,GAAA,2CAAAH,MAAA,+CAAuGG,GAAA,aAAAH,MAAA,aAAAI,UAAmDD,GAAA,2BAAAH,MAAA,6BAAqEG,GAAA,wCAAAH,MAAA,0CAA+FG,GAAA,qBAAAH,MAAA,yBAA2DG,GAAA,SAAAH,MAAA,mBAAAI,QAAA,OAA0DD,GAAA,sBAAAH,MAAA,sBAAAI,UAAqED,GAAA,2BAAAH,MAAA,6BAAqEG,GAAA,kCAAAH,MAAA,oCAAmFG,GAAA,uBAAAH,MAAA,yBAA6DG,GAAA,8BAAAH,MAAA,kCAA6EG,GAAA,wBAAAH,MAAA,sCAAAI,QAAA,OAA4FD,GAAA,2BAAAH,MAAA,4BAAAI,QAAA,OAAqFD,GAAA,iBAAAH,MAAA,iBAAAI,UAA2DD,GAAA,kCAAAH,MAAA,oCAAmFG,GAAA,4BAAAH,MAAA,8BAAuEG,GAAA,kDAAAH,MAAA,wDAAyHG,GAAA,aAAAH,MAAA,aAAAI,UAAmDD,GAAA,mBAAAH,MAAA,qBAAqDG,GAAA,UAAAH,MAAA,mCAA0DG,GAAA,WAAAH,MAAA,WAAAI,QAAA,OAAoDD,GAAA,cAAAH,MAAA,cAAAI,UAAqDD,GAAA,sDAAAH,MAAA,yDAA4HG,GAAA,8BAAAH,MAAA,gCAA2EG,GAAA,mBAAAH,MAAA,uBAAuDG,GAAA,+BAAAH,MAAA,mCAA+EG,GAAA,wBAAAH,MAAA,wBAAAI,UAAyED,GAAA,gBAAAH,MAAA,kBAA+CG,GAAA,0CAAAH,MAAA,4CAAmGG,GAAA,YAAAH,MAAA,qDAAAI,QAAA,OAA+FD,GAAA,iBAAAH,MAAA,4BAAAI,UAAsED,GAAA,wBAAAH,MAAA,0BAA+DG,GAAA,sBAAAH,MAAA,wBAA2DG,GAAA,mDAAAH,MAAA,yDAA2HG,GAAA,MAAAH,MAAA,iEAAAI,UAAgGD,GAAA,uBAAAH,MAAA,yBAA6DG,GAAA,qBAAAH,MAAA,yBAA2DG,GAAA,iBAAAH,MAAA,iCAAAI,QAAA,OAAgFD,GAAA,wBAAAH,MAAA,wBAAAI,UAAyED,GAAA,cAAAH,MAAA,gBAA2CG,GAAA,WAAAH,MAAA,eAAuCG,GAAA,UAAAH,MAAA,kBAAAI,UAAqDD,GAAA,iCAAAH,MAAA,qCAAmFG,GAAA,UAAAH,MAAA,kBAAAI,UAAqDD,GAAA,eAAAH,MAAA,iBAA6CG,GAAA,mBAAAH,MAAA,qBAAqDG,GAAA,WAAAH,MAAA,eAAuCG,GAAA,MAAAH,MAAA,wCAAAI,QAAA,OAA4ED,GAAA,cAAAH,MAAA,+CAAAI,QAAA,UAA8FL,MAAQC,MAAA,iCAAAC,KAAA,mBAAAC,QAA6EC,GAAA,QAAAH,MAAA,eAAAI,QAAA,OAAqDD,GAAA,kBAAAH,MAAA,kBAAAI,QAAA,OAAkED,GAAA,gBAAAH,MAAA,gBAAAI,QAAA,UAAiEL,MAAQC,MAAA,sBAAAC,KAAA,QAAAC,QAAuDC,GAAA,QAAAH,MAAA,eAAAI,UAAgDD,GAAA,WAAAH,MAAA,eAAuCG,GAAA,kBAAAH,MAAA,kBAAAI,UAA6DD,GAAA,eAAAH,MAAA,iBAA6CG,GAAA,qBAAAH,MAAA,uBAAyDG,GAAA,wBAAAH,MAAA,4BAAiEG,GAAA,yBAAAH,MAAA,yBAAAI,QAAA,OAAgFD,GAAA,oCAAAH,MAAA,oCAAAI,UAAiGD,GAAA,4CAAAH,MAAA,mDAA4GD,MAAQC,MAAA,iCAAAC,KAAA,mBAAAC,QAA6EC,GAAA,QAAAH,MAAA,eAAAI,UAAgDD,GAAA,WAAAH,MAAA,eAAuCG,GAAA,QAAAH,MAAA,kBAAAI,QAAA,OAAwDD,GAAA,QAAAH,MAAA,mBAAAI,QAAA,OAAyDD,GAAA,kBAAAH,MAAA,kBAAAI,QAAA,UAAqEL,MAAQC,MAAA,aAAAC,KAAA,aAAAC,QAAmDC,GAAA,QAAAH,MAAA,eAAAI,QAAA,OAAqDD,GAAA,aAAAH,MAAA,oCAAAI,QAAA,OAA+ED,GAAA,SAAAH,MAAA,0CAAAI,QAAA,UAAoFL,MAAQC,MAAA,QAAAC,KAAA,QAAAC,QAAyCC,GAAA,WAAAH,MAAA,sBAAAI,QAAA,OAA+DD,GAAA,aAAAH,MAAA,2BAAAI,QAAA,OAAsED,GAAA,kBAAAH,MAAA,kBAAAI,QAAA,OAAkED,GAAA,sBAAAH,MAAA,sBAAAI,QAAA,OAA0ED,GAAA,UAAAH,MAAA,8BAAAI,QAAA,YAA0EC,aAAgBJ,KAAA,wBAAAK,SAA0CL,KAAA,wBAAAD,MAAA,oEAA0GO,MAASN,KAAA,gBAAAD,MAAA,wCAAAQ,SAAA,qBAAsGC,MAASR,KAAA,8BAAAD,MAAA","file":"path---docs-core-file-upload-899baba61279cb3a94da.js","sourcesContent":["webpackJsonp([270716658481872],{\n\n/***/ 404:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"post\":{\"html\":\"<h1 id=\\\"handling-file-upload\\\"><a href=\\\"#handling-file-upload\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Handling File Upload</h1>\\n<p>As common a problem as it may seem, handling file upload requires a custom\\nimplementation in your app. This page will guide you in handling file upload in\\nyour API, with the help of\\n<a href=\\\"https://github.com/dustin10/VichUploaderBundle\\\" target=\\\"_blank\\\" rel=\\\"nofollow noopener noreferrer\\\">VichUploaderBundle</a>. It is\\nrecommended you <a href=\\\"https://github.com/dustin10/VichUploaderBundle/blob/master/Resources/doc/index.md\\\" target=\\\"_blank\\\" rel=\\\"nofollow noopener noreferrer\\\">read the documentation of\\nVichUploaderBundle</a>\\nbefore proceeding. It will help you get a grasp on how the bundle works, and why we use it.</p>\\n<h2 id=\\\"installing-vichuploaderbundle\\\"><a href=\\\"#installing-vichuploaderbundle\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Installing VichUploaderBundle</h2>\\n<p>Install the bundle with the help of composer:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code>docker-compose <span class=\\\"token function\\\">exec</span> php composer require vich/uploader-bundle\\n</code></pre>\\n      </div>\\n<p>This will create a new configuration file that you will need to slightly change\\nto make it look like this.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-yaml\\\"><code><span class=\\\"token comment\\\"># config/packages/vich_uploader.yaml</span>\\n<span class=\\\"token key atrule\\\">vich_uploader</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">db_driver</span><span class=\\\"token punctuation\\\">:</span> orm\\n\\n    <span class=\\\"token key atrule\\\">mappings</span><span class=\\\"token punctuation\\\">:</span>\\n        <span class=\\\"token key atrule\\\">media_object</span><span class=\\\"token punctuation\\\">:</span>\\n            <span class=\\\"token key atrule\\\">uri_prefix</span><span class=\\\"token punctuation\\\">:</span> /media\\n            <span class=\\\"token key atrule\\\">upload_destination</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'%kernel.project_dir%/public/media'</span>\\n</code></pre>\\n      </div>\\n<h2 id=\\\"configuring-the-entity-receiving-the-uploaded-file\\\"><a href=\\\"#configuring-the-entity-receiving-the-uploaded-file\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Configuring the Entity Receiving the Uploaded File</h2>\\n<p>In our exemple, we will create a <code>MediaObject</code> API resource. We will post files\\nto this resource endpoint, and then link the newly created resource to another\\nresource (in our case: Book).</p>\\n<p>The <code>MediaObject</code> resource is implemented like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code><span class=\\\"token delimiter important\\\">&lt;?php</span>\\n<span class=\\\"token comment\\\">// src/Entity/MediaObject.php</span>\\n\\n<span class=\\\"token keyword\\\">namespace</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Entity</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">ApiPlatform<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Annotation<span class=\\\"token punctuation\\\">\\\\</span>ApiProperty</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">ApiPlatform<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Annotation<span class=\\\"token punctuation\\\">\\\\</span>ApiResource</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Controller<span class=\\\"token punctuation\\\">\\\\</span>CreateMediaObjectAction</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Doctrine<span class=\\\"token punctuation\\\">\\\\</span>ORM<span class=\\\"token punctuation\\\">\\\\</span>Mapping</span> <span class=\\\"token keyword\\\">as</span> <span class=\\\"token constant\\\">ORM</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>HttpFoundation<span class=\\\"token punctuation\\\">\\\\</span>File<span class=\\\"token punctuation\\\">\\\\</span>File</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Validator<span class=\\\"token punctuation\\\">\\\\</span>Constraints</span> <span class=\\\"token keyword\\\">as</span> Assert<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Vich<span class=\\\"token punctuation\\\">\\\\</span>UploaderBundle<span class=\\\"token punctuation\\\">\\\\</span>Mapping<span class=\\\"token punctuation\\\">\\\\</span>Annotation</span> <span class=\\\"token keyword\\\">as</span> Vich<span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">/**\\n * @ORM\\\\Entity\\n * @ApiResource(iri=\\\"http://schema.org/MediaObject\\\", collectionOperations={\\n *     \\\"get\\\",\\n *     \\\"post\\\"={\\n *         \\\"method\\\"=\\\"POST\\\",\\n *         \\\"path\\\"=\\\"/media_objects\\\",\\n *         \\\"controller\\\"=CreateMediaObjectAction::class,\\n *         \\\"defaults\\\"={\\\"_api_receive\\\"=false},\\n *     },\\n * })\\n * @Vich\\\\Uploadable\\n */</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">MediaObject</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// ...</span>\\n\\n    <span class=\\\"token comment\\\">/**\\n     * @var File|null\\n     * @Assert\\\\NotNull()\\n     * @Vich\\\\UploadableField(mapping=\\\"media_object\\\", fileNameProperty=\\\"contentUrl\\\")\\n     */</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token variable\\\">$file</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">/**\\n     * @var string|null\\n     * @ORM\\\\Column(nullable=true)\\n     * @ApiProperty(iri=\\\"http://schema.org/contentUrl\\\")\\n     */</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token variable\\\">$contentUrl</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<h2 id=\\\"handling-file-upload-1\\\"><a href=\\\"#handling-file-upload-1\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Handling File Upload</h2>\\n<p>At this point, the entity is configured, but we still need to write the action\\nthat handles the file upload.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code><span class=\\\"token delimiter important\\\">&lt;?php</span>\\n<span class=\\\"token comment\\\">// src/Controller/CreateMediaObjectAction.php</span>\\n\\n<span class=\\\"token keyword\\\">namespace</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Controller</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">ApiPlatform<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Bridge<span class=\\\"token punctuation\\\">\\\\</span>Symfony<span class=\\\"token punctuation\\\">\\\\</span>Validator<span class=\\\"token punctuation\\\">\\\\</span>Exception<span class=\\\"token punctuation\\\">\\\\</span>ValidationException</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Entity<span class=\\\"token punctuation\\\">\\\\</span>MediaObject</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>MediaObjectType</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Sensio<span class=\\\"token punctuation\\\">\\\\</span>Bundle<span class=\\\"token punctuation\\\">\\\\</span>FrameworkExtraBundle<span class=\\\"token punctuation\\\">\\\\</span>Configuration<span class=\\\"token punctuation\\\">\\\\</span>IsGranted</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Bridge<span class=\\\"token punctuation\\\">\\\\</span>Doctrine<span class=\\\"token punctuation\\\">\\\\</span>RegistryInterface</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Bundle<span class=\\\"token punctuation\\\">\\\\</span>FrameworkBundle<span class=\\\"token punctuation\\\">\\\\</span>Controller<span class=\\\"token punctuation\\\">\\\\</span>AbstractController</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>FormFactoryInterface</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>HttpFoundation<span class=\\\"token punctuation\\\">\\\\</span>Request</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>HttpFoundation<span class=\\\"token punctuation\\\">\\\\</span>Response</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Serializer<span class=\\\"token punctuation\\\">\\\\</span>SerializerInterface</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Validator<span class=\\\"token punctuation\\\">\\\\</span>Validator<span class=\\\"token punctuation\\\">\\\\</span>ValidatorInterface</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">final</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">CreateMediaObjectAction</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">private</span> <span class=\\\"token variable\\\">$validator</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">private</span> <span class=\\\"token variable\\\">$doctrine</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">private</span> <span class=\\\"token variable\\\">$factory</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">__construct</span><span class=\\\"token punctuation\\\">(</span>RegistryInterface <span class=\\\"token variable\\\">$doctrine</span><span class=\\\"token punctuation\\\">,</span> FormFactoryInterface <span class=\\\"token variable\\\">$factory</span><span class=\\\"token punctuation\\\">,</span> ValidatorInterface <span class=\\\"token variable\\\">$validator</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">validator</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$validator</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">doctrine</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$doctrine</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">factory</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$factory</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token comment\\\">/**\\n     * @IsGranted(\\\"ROLE_USER\\\")\\n     */</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">__invoke</span><span class=\\\"token punctuation\\\">(</span>Request <span class=\\\"token variable\\\">$request</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">:</span> MediaObject\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token variable\\\">$mediaObject</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">MediaObject</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n        <span class=\\\"token variable\\\">$form</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">factory</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">create</span><span class=\\\"token punctuation\\\">(</span>MediaObjectType<span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token keyword\\\">class</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token variable\\\">$form</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">handleRequest</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$request</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$form</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">isSubmitted</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token variable\\\">$form</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">isValid</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token variable\\\">$em</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">doctrine</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">getManager</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token variable\\\">$em</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">persist</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token variable\\\">$em</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">flush</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n            <span class=\\\"token comment\\\">// Prevent the serialization of the file property</span>\\n            <span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">file</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n\\n            <span class=\\\"token keyword\\\">return</span> <span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token comment\\\">// This will be handled by API Platform and returns a validation error.</span>\\n        <span class=\\\"token keyword\\\">throw</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">ValidationException</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">validator</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">validate</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>As you can see, the action uses a form. You will need this form to be like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code><span class=\\\"token delimiter important\\\">&lt;?php</span>\\n<span class=\\\"token comment\\\">// src/Form/MediaObjectType.php</span>\\n\\n<span class=\\\"token keyword\\\">namespace</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Form</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Entity<span class=\\\"token punctuation\\\">\\\\</span>MediaObject</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>AbstractType</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>Extension<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Type<span class=\\\"token punctuation\\\">\\\\</span>FileType</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>FormBuilderInterface</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>OptionsResolver<span class=\\\"token punctuation\\\">\\\\</span>OptionsResolver</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">final</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">MediaObjectType</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">AbstractType</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">buildForm</span><span class=\\\"token punctuation\\\">(</span>FormBuilderInterface <span class=\\\"token variable\\\">$builder</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">array</span> <span class=\\\"token variable\\\">$options</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token variable\\\">$builder</span>\\n            <span class=\\\"token comment\\\">// Configure each fields you want to be submitted here, like a classic form.</span>\\n            <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">add</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'file'</span><span class=\\\"token punctuation\\\">,</span> FileType<span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token keyword\\\">class</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">[</span>\\n                <span class=\\\"token string\\\">'label'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token string\\\">'label.file'</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">'required'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span>\\n        <span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">configureOptions</span><span class=\\\"token punctuation\\\">(</span>OptionsResolver <span class=\\\"token variable\\\">$resolver</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token variable\\\">$resolver</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">setDefaults</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token string\\\">'data_class'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> MediaObject<span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token keyword\\\">class</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token string\\\">'csrf_protection'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">getBlockPrefix</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token string\\\">''</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<h2 id=\\\"making-a-request-to-the-media_objects-endpoint\\\"><a href=\\\"#making-a-request-to-the-media_objects-endpoint\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Making a Request to the <code>/media_objects</code> Endpoint</h2>\\n<p>Your <code>/media_objects</code> endpoint is now ready to receive a <code>POST</code> request with a\\nfile. This endpoint accepts standard <code>multipart/form-data</code> encoded data, but\\nnot JSON data. You will need to format your request accordingly. After posting\\nyour data, you will get a response looking like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">\\\"@type\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"http://schema.org/ImageObject\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">\\\"@id\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"/media_objects/&lt;id>\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">\\\"contentUrl\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"&lt;filename>\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<h2 id=\\\"linking-a-mediaobject-resource-to-another-resource\\\"><a href=\\\"#linking-a-mediaobject-resource-to-another-resource\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Linking a MediaObject Resource to Another Resource</h2>\\n<p>We now need to update our <code>Book</code> resource, so that we can link a <code>MediaObject</code>\\nto serve as the book cover.</p>\\n<p>We first need to edit our Book resource, and add a new property called <code>image</code>.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code><span class=\\\"token delimiter important\\\">&lt;?php</span>\\n<span class=\\\"token comment\\\">// src/Entity/Book.php</span>\\n\\n<span class=\\\"token keyword\\\">namespace</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Entity</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">ApiPlatform<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Annotation<span class=\\\"token punctuation\\\">\\\\</span>ApiResource</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Doctrine<span class=\\\"token punctuation\\\">\\\\</span>ORM<span class=\\\"token punctuation\\\">\\\\</span>Mapping</span> <span class=\\\"token keyword\\\">as</span> <span class=\\\"token constant\\\">ORM</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>HttpFoundation<span class=\\\"token punctuation\\\">\\\\</span>File<span class=\\\"token punctuation\\\">\\\\</span>File</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Vich<span class=\\\"token punctuation\\\">\\\\</span>UploaderBundle<span class=\\\"token punctuation\\\">\\\\</span>Mapping<span class=\\\"token punctuation\\\">\\\\</span>Annotation</span> <span class=\\\"token keyword\\\">as</span> Vich<span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">/**\\n * @ORM\\\\Entity\\n * @ApiResource(iri=\\\"http://schema.org/Book\\\")\\n */</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Book</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// ...</span>\\n    <span class=\\\"token comment\\\">/**\\n     * @var MediaObject|null\\n     * @ORM\\\\ManyToOne(targetEntity=\\\"App\\\\Entity\\\\MediaObject\\\")\\n     * @ORM\\\\JoinColumn(nullable=true)\\n     * @ApiProperty(iri=\\\"http://schema.org/image\\\")\\n     */</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token variable\\\">$image</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>By sending a POST request to create a new book, linked with the previously\\nuploaded cover, you can have a nice illustrated book record!</p>\\n<p><code>POST /books</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">\\\"name\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"The name\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token property\\\">\\\"image\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"/media_objects/&lt;id>\\\"</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>Voila! You can now send files to your API, and link them to any other resources\\nin your app.</p>\"},\"navDoc\":{\"edges\":[{\"node\":{\"title\":\"The Distribution\",\"path\":\"distribution\",\"items\":[{\"id\":\"index\",\"title\":\"Creating a Fully Featured API in 5 Minutes\",\"anchors\":null},{\"id\":\"testing\",\"title\":\"Testing and Specifying the API\",\"anchors\":null}]}},{\"node\":{\"title\":\"The API Component\",\"path\":\"core\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":null},{\"id\":\"getting-started\",\"title\":\"Getting Started\",\"anchors\":[{\"id\":\"installing-api-platform-core\",\"title\":\"Installing API Platform Core\"},{\"id\":\"before-reading-this-documentation\",\"title\":\"Before Reading this Documentation\"},{\"id\":\"mapping-the-entities\",\"title\":\"Mapping the Entities\"}]},{\"id\":\"configuration\",\"title\":\"Configuration\",\"anchors\":null},{\"id\":\"operations\",\"title\":\"Operations\",\"anchors\":[{\"id\":\"enabling-and-disabling-operations\",\"title\":\"Enabling and Disabling Operations\"},{\"id\":\"configuring-operations\",\"title\":\"Configuring Operations\"},{\"id\":\"subresources\",\"title\":\"Subresources\"},{\"id\":\"creating-custom-operations-and-controllers\",\"title\":\"Creating Custom Operations and Controllers\"}]},{\"id\":\"default-order\",\"title\":\"Overriding Default Order\",\"anchors\":null},{\"id\":\"filters\",\"title\":\"Filters\",\"anchors\":[{\"id\":\"doctrine-orm-filters\",\"title\":\"Doctrine ORM Filters\"},{\"id\":\"serializer-filters\",\"title\":\"Serializer Filters\"},{\"id\":\"creating-custom-filters\",\"title\":\"Creating Custom Filters\"},{\"id\":\"apifilter-annotation\",\"title\":\"ApiFilter Annotation\"}]},{\"id\":\"serialization\",\"title\":\"The Serialization Process\",\"anchors\":[{\"id\":\"overall-process\",\"title\":\"Overall Process\"},{\"id\":\"available-serializers\",\"title\":\"Available Serializers\"},{\"id\":\"the-serialization-context-groups-and-relations\",\"title\":\"The Serialization Context, Groups and Relations\"},{\"id\":\"using-serialization-groups\",\"title\":\"Using Serialization Groups\"},{\"id\":\"using-different-serialization-groups-per-operation\",\"title\":\"Using Different Serialization Groups per Operation\"},{\"id\":\"changing-the-serialization-context-dynamically\",\"title\":\"Changing the Serialization Context Dynamically\"},{\"id\":\"changing-the-serialization-context-on-a-per-item-basis\",\"title\":\"Changing the Serialization Context on a Per Item Basis\"},{\"id\":\"name-conversion\",\"title\":\"Name Conversion\"},{\"id\":\"decorating-a-serializer-and-add-extra-data\",\"title\":\"Decorating a Serializer and Add Extra Data\"},{\"id\":\"entity-identifier-case\",\"title\":\"Entity Identifier Case\"},{\"id\":\"embedding-the-json-ld-context\",\"title\":\"Embedding the JSON-LD Context\"}]},{\"id\":\"validation\",\"title\":\"Validation\",\"anchors\":[{\"id\":\"using-validation-groups\",\"title\":\"Using Validation Groups\"},{\"id\":\"dynamic-validation-groups\",\"title\":\"Dynamic Validation Groups\"},{\"id\":\"error-levels-and-payload-serialization\",\"title\":\"Error Levels and Payload Serialization\"}]},{\"id\":\"errors\",\"title\":\"Error Handling\",\"anchors\":[{\"id\":\"converting-php-exceptions-to-http-errors\",\"title\":\"Converting PHP Exceptions to HTTP Errors\"}]},{\"id\":\"pagination\",\"title\":\"Pagination\",\"anchors\":[{\"id\":\"disabling-the-pagination\",\"title\":\"Disabling the Pagination\"},{\"id\":\"changing-the-number-of-items-per-page\",\"title\":\"Changing the Number of Items per Page\"},{\"id\":\"partial-pagination\",\"title\":\"Partial Pagination\"}]},{\"id\":\"events\",\"title\":\"The Event System\",\"anchors\":null},{\"id\":\"content-negotiation\",\"title\":\"Content Negotiation\",\"anchors\":[{\"id\":\"enabling-several-formats\",\"title\":\"Enabling Several Formats\"},{\"id\":\"registering-a-custom-serializer\",\"title\":\"Registering a Custom Serializer\"},{\"id\":\"creating-a-responder\",\"title\":\"Creating a Responder\"},{\"id\":\"writing-a-custom-normalizer\",\"title\":\"Writing a Custom Normalizer\"}]},{\"id\":\"external-vocabularies\",\"title\":\"Using External JSON-LD Vocabularies\",\"anchors\":null},{\"id\":\"extending-jsonld-context\",\"title\":\"Extending JSON-LD context\",\"anchors\":null},{\"id\":\"data-providers\",\"title\":\"Data Providers\",\"anchors\":[{\"id\":\"custom-collection-data-provider\",\"title\":\"Custom Collection Data Provider\"},{\"id\":\"custom-item-data-provider\",\"title\":\"Custom Item Data Provider\"},{\"id\":\"injecting-the-serializer-in-an-itemdataprovider\",\"title\":\"Injecting the Serializer in an \\\"ItemDataProvider\\\"\"}]},{\"id\":\"extensions\",\"title\":\"Extensions\",\"anchors\":[{\"id\":\"custom-extension\",\"title\":\"Custom Extension\"},{\"id\":\"example\",\"title\":\"Filter upon the current user\"}]},{\"id\":\"security\",\"title\":\"Security\",\"anchors\":null},{\"id\":\"performance\",\"title\":\"Performance\",\"anchors\":[{\"id\":\"enabling-the-builtin-http-cache-invalidation-system\",\"title\":\"Enabling the Built-in HTTP Cache Invalidation System\"},{\"id\":\"enabling-the-metadata-cache\",\"title\":\"Enabling the Metadata Cache\"},{\"id\":\"using-ppm-php-pm\",\"title\":\"Using PPM (PHP-PM)\"},{\"id\":\"doctrine-queries-and-indexes\",\"title\":\"Doctrine Queries and Indexes\"}]},{\"id\":\"operation-path-naming\",\"title\":\"Operation Path Naming\",\"anchors\":[{\"id\":\"configuration\",\"title\":\"Configuration\"},{\"id\":\"create-a-custom-operation-path-resolver\",\"title\":\"Create a Custom Operation Path Naming\"}]},{\"id\":\"form-data\",\"title\":\"Accept application/x-www-form-urlencoded Form Data\",\"anchors\":null},{\"id\":\"fosuser-bundle\",\"title\":\"FOSUserBundle Integration\",\"anchors\":[{\"id\":\"installing-the-bundle\",\"title\":\"Installing the Bundle\"},{\"id\":\"enabling-the-bridge\",\"title\":\"Enabling the Bridge\"},{\"id\":\"creating-a-user-entity-with-serialization-groups\",\"title\":\"Creating a \\\"User\\\" Entity with Serialization Groups\"}]},{\"id\":\"jwt\",\"title\":\"Adding a JWT authentication using LexikJWTAuthenticationBundle\",\"anchors\":[{\"id\":\"testing-with-swagger\",\"title\":\"Testing with Swagger\"},{\"id\":\"testing-with-behat\",\"title\":\"Testing with Behat\"}]},{\"id\":\"nelmio-api-doc\",\"title\":\"NelmioApiDocBundle integration\",\"anchors\":null},{\"id\":\"angularjs-integration\",\"title\":\"AngularJS Integration\",\"anchors\":[{\"id\":\"restangular\",\"title\":\"Restangular\"},{\"id\":\"ng-admin\",\"title\":\"ng-admin\"}]},{\"id\":\"swagger\",\"title\":\"Swagger Support\",\"anchors\":[{\"id\":\"override-swagger-documentation\",\"title\":\"Override Swagger documentation\"}]},{\"id\":\"graphql\",\"title\":\"GraphQL Support\",\"anchors\":[{\"id\":\"overall-view\",\"title\":\"Overall View\"},{\"id\":\"enabling-graphql\",\"title\":\"Enabling GraphQL\"},{\"id\":\"graphiql\",\"title\":\"GraphiQL\"}]},{\"id\":\"dto\",\"title\":\"Handling Data Transfer Objects (DTOs)\",\"anchors\":null},{\"id\":\"file-upload\",\"title\":\"Handling File Upload with VichUploaderBundle\",\"anchors\":null}]}},{\"node\":{\"title\":\"The Schema Generator Component\",\"path\":\"schema-generator\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":null},{\"id\":\"getting-started\",\"title\":\"Getting Started\",\"anchors\":null},{\"id\":\"configuration\",\"title\":\"Configuration\",\"anchors\":null}]}},{\"node\":{\"title\":\"The Admin Component\",\"path\":\"admin\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":[{\"id\":\"features\",\"title\":\"Features\"}]},{\"id\":\"getting-started\",\"title\":\"Getting Started\",\"anchors\":[{\"id\":\"installation\",\"title\":\"Installation\"},{\"id\":\"creating-the-admin\",\"title\":\"Creating the Admin\"},{\"id\":\"customizing-the-admin\",\"title\":\"Customizing the Admin\"}]},{\"id\":\"authentication-support\",\"title\":\"Authentication Support\",\"anchors\":null},{\"id\":\"handling-relations-to-collections\",\"title\":\"Handling Relations to Collections\",\"anchors\":[{\"id\":\"using-an-autocomplete-input-for-relations\",\"title\":\"Using an Autocomplete Input for Relations\"}]}]}},{\"node\":{\"title\":\"The Client Generator Component\",\"path\":\"client-generator\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":[{\"id\":\"features\",\"title\":\"Features\"}]},{\"id\":\"react\",\"title\":\"React generator\",\"anchors\":null},{\"id\":\"vuejs\",\"title\":\"Vue.js generator\",\"anchors\":null},{\"id\":\"troubleshooting\",\"title\":\"Troubleshooting\",\"anchors\":null}]}},{\"node\":{\"title\":\"Deployment\",\"path\":\"deployment\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":null},{\"id\":\"kubernetes\",\"title\":\"Deploying to a Kubernetes Cluster\",\"anchors\":null},{\"id\":\"heroku\",\"title\":\"Deploying an API Platform App on Heroku\",\"anchors\":null}]}},{\"node\":{\"title\":\"Extra\",\"path\":\"extra\",\"items\":[{\"id\":\"releases\",\"title\":\"The Release Process\",\"anchors\":null},{\"id\":\"philosophy\",\"title\":\"The Project's Philosophy\",\"anchors\":null},{\"id\":\"troubleshooting\",\"title\":\"Troubleshooting\",\"anchors\":null},{\"id\":\"contribution-guides\",\"title\":\"Contribution Guides\",\"anchors\":null},{\"id\":\"conduct\",\"title\":\"Contributor Code Of Conduct\",\"anchors\":null}]}}]}},\"pathContext\":{\"path\":\"docs/core/file-upload\",\"current\":{\"path\":\"docs/core/file-upload\",\"title\":\"The API Component - Handling File Upload with VichUploaderBundle\"},\"prev\":{\"path\":\"docs/core/dto\",\"title\":\"Handling Data Transfer Objects (DTOs)\",\"rootPath\":\"The API Component\"},\"next\":{\"path\":\"docs/schema-generator/index\",\"title\":\"The Schema Generator Component - Introduction\"}}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---docs-core-file-upload-899baba61279cb3a94da.js","module.exports = {\"data\":{\"post\":{\"html\":\"<h1 id=\\\"handling-file-upload\\\"><a href=\\\"#handling-file-upload\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Handling File Upload</h1>\\n<p>As common a problem as it may seem, handling file upload requires a custom\\nimplementation in your app. This page will guide you in handling file upload in\\nyour API, with the help of\\n<a href=\\\"https://github.com/dustin10/VichUploaderBundle\\\" target=\\\"_blank\\\" rel=\\\"nofollow noopener noreferrer\\\">VichUploaderBundle</a>. It is\\nrecommended you <a href=\\\"https://github.com/dustin10/VichUploaderBundle/blob/master/Resources/doc/index.md\\\" target=\\\"_blank\\\" rel=\\\"nofollow noopener noreferrer\\\">read the documentation of\\nVichUploaderBundle</a>\\nbefore proceeding. It will help you get a grasp on how the bundle works, and why we use it.</p>\\n<h2 id=\\\"installing-vichuploaderbundle\\\"><a href=\\\"#installing-vichuploaderbundle\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Installing VichUploaderBundle</h2>\\n<p>Install the bundle with the help of composer:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code>docker-compose <span class=\\\"token function\\\">exec</span> php composer require vich/uploader-bundle\\n</code></pre>\\n      </div>\\n<p>This will create a new configuration file that you will need to slightly change\\nto make it look like this.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-yaml\\\"><code><span class=\\\"token comment\\\"># config/packages/vich_uploader.yaml</span>\\n<span class=\\\"token key atrule\\\">vich_uploader</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">db_driver</span><span class=\\\"token punctuation\\\">:</span> orm\\n\\n    <span class=\\\"token key atrule\\\">mappings</span><span class=\\\"token punctuation\\\">:</span>\\n        <span class=\\\"token key atrule\\\">media_object</span><span class=\\\"token punctuation\\\">:</span>\\n            <span class=\\\"token key atrule\\\">uri_prefix</span><span class=\\\"token punctuation\\\">:</span> /media\\n            <span class=\\\"token key atrule\\\">upload_destination</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'%kernel.project_dir%/public/media'</span>\\n</code></pre>\\n      </div>\\n<h2 id=\\\"configuring-the-entity-receiving-the-uploaded-file\\\"><a href=\\\"#configuring-the-entity-receiving-the-uploaded-file\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Configuring the Entity Receiving the Uploaded File</h2>\\n<p>In our exemple, we will create a <code>MediaObject</code> API resource. We will post files\\nto this resource endpoint, and then link the newly created resource to another\\nresource (in our case: Book).</p>\\n<p>The <code>MediaObject</code> resource is implemented like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code><span class=\\\"token delimiter important\\\">&lt;?php</span>\\n<span class=\\\"token comment\\\">// src/Entity/MediaObject.php</span>\\n\\n<span class=\\\"token keyword\\\">namespace</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Entity</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">ApiPlatform<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Annotation<span class=\\\"token punctuation\\\">\\\\</span>ApiProperty</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">ApiPlatform<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Annotation<span class=\\\"token punctuation\\\">\\\\</span>ApiResource</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Controller<span class=\\\"token punctuation\\\">\\\\</span>CreateMediaObjectAction</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Doctrine<span class=\\\"token punctuation\\\">\\\\</span>ORM<span class=\\\"token punctuation\\\">\\\\</span>Mapping</span> <span class=\\\"token keyword\\\">as</span> <span class=\\\"token constant\\\">ORM</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>HttpFoundation<span class=\\\"token punctuation\\\">\\\\</span>File<span class=\\\"token punctuation\\\">\\\\</span>File</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Validator<span class=\\\"token punctuation\\\">\\\\</span>Constraints</span> <span class=\\\"token keyword\\\">as</span> Assert<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Vich<span class=\\\"token punctuation\\\">\\\\</span>UploaderBundle<span class=\\\"token punctuation\\\">\\\\</span>Mapping<span class=\\\"token punctuation\\\">\\\\</span>Annotation</span> <span class=\\\"token keyword\\\">as</span> Vich<span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">/**\\n * @ORM\\\\Entity\\n * @ApiResource(iri=\\\"http://schema.org/MediaObject\\\", collectionOperations={\\n *     \\\"get\\\",\\n *     \\\"post\\\"={\\n *         \\\"method\\\"=\\\"POST\\\",\\n *         \\\"path\\\"=\\\"/media_objects\\\",\\n *         \\\"controller\\\"=CreateMediaObjectAction::class,\\n *         \\\"defaults\\\"={\\\"_api_receive\\\"=false},\\n *     },\\n * })\\n * @Vich\\\\Uploadable\\n */</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">MediaObject</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// ...</span>\\n\\n    <span class=\\\"token comment\\\">/**\\n     * @var File|null\\n     * @Assert\\\\NotNull()\\n     * @Vich\\\\UploadableField(mapping=\\\"media_object\\\", fileNameProperty=\\\"contentUrl\\\")\\n     */</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token variable\\\">$file</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">/**\\n     * @var string|null\\n     * @ORM\\\\Column(nullable=true)\\n     * @ApiProperty(iri=\\\"http://schema.org/contentUrl\\\")\\n     */</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token variable\\\">$contentUrl</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<h2 id=\\\"handling-file-upload-1\\\"><a href=\\\"#handling-file-upload-1\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Handling File Upload</h2>\\n<p>At this point, the entity is configured, but we still need to write the action\\nthat handles the file upload.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code><span class=\\\"token delimiter important\\\">&lt;?php</span>\\n<span class=\\\"token comment\\\">// src/Controller/CreateMediaObjectAction.php</span>\\n\\n<span class=\\\"token keyword\\\">namespace</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Controller</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">ApiPlatform<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Bridge<span class=\\\"token punctuation\\\">\\\\</span>Symfony<span class=\\\"token punctuation\\\">\\\\</span>Validator<span class=\\\"token punctuation\\\">\\\\</span>Exception<span class=\\\"token punctuation\\\">\\\\</span>ValidationException</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Entity<span class=\\\"token punctuation\\\">\\\\</span>MediaObject</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>MediaObjectType</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Sensio<span class=\\\"token punctuation\\\">\\\\</span>Bundle<span class=\\\"token punctuation\\\">\\\\</span>FrameworkExtraBundle<span class=\\\"token punctuation\\\">\\\\</span>Configuration<span class=\\\"token punctuation\\\">\\\\</span>IsGranted</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Bridge<span class=\\\"token punctuation\\\">\\\\</span>Doctrine<span class=\\\"token punctuation\\\">\\\\</span>RegistryInterface</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Bundle<span class=\\\"token punctuation\\\">\\\\</span>FrameworkBundle<span class=\\\"token punctuation\\\">\\\\</span>Controller<span class=\\\"token punctuation\\\">\\\\</span>AbstractController</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>FormFactoryInterface</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>HttpFoundation<span class=\\\"token punctuation\\\">\\\\</span>Request</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>HttpFoundation<span class=\\\"token punctuation\\\">\\\\</span>Response</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Serializer<span class=\\\"token punctuation\\\">\\\\</span>SerializerInterface</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Validator<span class=\\\"token punctuation\\\">\\\\</span>Validator<span class=\\\"token punctuation\\\">\\\\</span>ValidatorInterface</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">final</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">CreateMediaObjectAction</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">private</span> <span class=\\\"token variable\\\">$validator</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">private</span> <span class=\\\"token variable\\\">$doctrine</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">private</span> <span class=\\\"token variable\\\">$factory</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">__construct</span><span class=\\\"token punctuation\\\">(</span>RegistryInterface <span class=\\\"token variable\\\">$doctrine</span><span class=\\\"token punctuation\\\">,</span> FormFactoryInterface <span class=\\\"token variable\\\">$factory</span><span class=\\\"token punctuation\\\">,</span> ValidatorInterface <span class=\\\"token variable\\\">$validator</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">validator</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$validator</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">doctrine</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$doctrine</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">factory</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$factory</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token comment\\\">/**\\n     * @IsGranted(\\\"ROLE_USER\\\")\\n     */</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">__invoke</span><span class=\\\"token punctuation\\\">(</span>Request <span class=\\\"token variable\\\">$request</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">:</span> MediaObject\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token variable\\\">$mediaObject</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">MediaObject</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n        <span class=\\\"token variable\\\">$form</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">factory</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">create</span><span class=\\\"token punctuation\\\">(</span>MediaObjectType<span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token keyword\\\">class</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token variable\\\">$form</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">handleRequest</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$request</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$form</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">isSubmitted</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token variable\\\">$form</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">isValid</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token variable\\\">$em</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">doctrine</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">getManager</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token variable\\\">$em</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">persist</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token variable\\\">$em</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">flush</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n            <span class=\\\"token comment\\\">// Prevent the serialization of the file property</span>\\n            <span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">file</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n\\n            <span class=\\\"token keyword\\\">return</span> <span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token comment\\\">// This will be handled by API Platform and returns a validation error.</span>\\n        <span class=\\\"token keyword\\\">throw</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">ValidationException</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$this</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token property\\\">validator</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">validate</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$mediaObject</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>As you can see, the action uses a form. You will need this form to be like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code><span class=\\\"token delimiter important\\\">&lt;?php</span>\\n<span class=\\\"token comment\\\">// src/Form/MediaObjectType.php</span>\\n\\n<span class=\\\"token keyword\\\">namespace</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Form</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Entity<span class=\\\"token punctuation\\\">\\\\</span>MediaObject</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>AbstractType</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>Extension<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Type<span class=\\\"token punctuation\\\">\\\\</span>FileType</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>Form<span class=\\\"token punctuation\\\">\\\\</span>FormBuilderInterface</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>OptionsResolver<span class=\\\"token punctuation\\\">\\\\</span>OptionsResolver</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">final</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">MediaObjectType</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">AbstractType</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">buildForm</span><span class=\\\"token punctuation\\\">(</span>FormBuilderInterface <span class=\\\"token variable\\\">$builder</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">array</span> <span class=\\\"token variable\\\">$options</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token variable\\\">$builder</span>\\n            <span class=\\\"token comment\\\">// Configure each fields you want to be submitted here, like a classic form.</span>\\n            <span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">add</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'file'</span><span class=\\\"token punctuation\\\">,</span> FileType<span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token keyword\\\">class</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">[</span>\\n                <span class=\\\"token string\\\">'label'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token string\\\">'label.file'</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">'required'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span>\\n        <span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">configureOptions</span><span class=\\\"token punctuation\\\">(</span>OptionsResolver <span class=\\\"token variable\\\">$resolver</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token variable\\\">$resolver</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">></span><span class=\\\"token function\\\">setDefaults</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token string\\\">'data_class'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> MediaObject<span class=\\\"token punctuation\\\">:</span><span class=\\\"token punctuation\\\">:</span><span class=\\\"token keyword\\\">class</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token string\\\">'csrf_protection'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">getBlockPrefix</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token string\\\">''</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<h2 id=\\\"making-a-request-to-the-media_objects-endpoint\\\"><a href=\\\"#making-a-request-to-the-media_objects-endpoint\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Making a Request to the <code>/media_objects</code> Endpoint</h2>\\n<p>Your <code>/media_objects</code> endpoint is now ready to receive a <code>POST</code> request with a\\nfile. This endpoint accepts standard <code>multipart/form-data</code> encoded data, but\\nnot JSON data. You will need to format your request accordingly. After posting\\nyour data, you will get a response looking like this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">\\\"@type\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"http://schema.org/ImageObject\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">\\\"@id\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"/media_objects/&lt;id>\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">\\\"contentUrl\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"&lt;filename>\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<h2 id=\\\"linking-a-mediaobject-resource-to-another-resource\\\"><a href=\\\"#linking-a-mediaobject-resource-to-another-resource\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Linking a MediaObject Resource to Another Resource</h2>\\n<p>We now need to update our <code>Book</code> resource, so that we can link a <code>MediaObject</code>\\nto serve as the book cover.</p>\\n<p>We first need to edit our Book resource, and add a new property called <code>image</code>.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-php\\\"><code><span class=\\\"token delimiter important\\\">&lt;?php</span>\\n<span class=\\\"token comment\\\">// src/Entity/Book.php</span>\\n\\n<span class=\\\"token keyword\\\">namespace</span> <span class=\\\"token package\\\">App<span class=\\\"token punctuation\\\">\\\\</span>Entity</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">ApiPlatform<span class=\\\"token punctuation\\\">\\\\</span>Core<span class=\\\"token punctuation\\\">\\\\</span>Annotation<span class=\\\"token punctuation\\\">\\\\</span>ApiResource</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Doctrine<span class=\\\"token punctuation\\\">\\\\</span>ORM<span class=\\\"token punctuation\\\">\\\\</span>Mapping</span> <span class=\\\"token keyword\\\">as</span> <span class=\\\"token constant\\\">ORM</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Symfony<span class=\\\"token punctuation\\\">\\\\</span>Component<span class=\\\"token punctuation\\\">\\\\</span>HttpFoundation<span class=\\\"token punctuation\\\">\\\\</span>File<span class=\\\"token punctuation\\\">\\\\</span>File</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">use</span> <span class=\\\"token package\\\">Vich<span class=\\\"token punctuation\\\">\\\\</span>UploaderBundle<span class=\\\"token punctuation\\\">\\\\</span>Mapping<span class=\\\"token punctuation\\\">\\\\</span>Annotation</span> <span class=\\\"token keyword\\\">as</span> Vich<span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">/**\\n * @ORM\\\\Entity\\n * @ApiResource(iri=\\\"http://schema.org/Book\\\")\\n */</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Book</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// ...</span>\\n    <span class=\\\"token comment\\\">/**\\n     * @var MediaObject|null\\n     * @ORM\\\\ManyToOne(targetEntity=\\\"App\\\\Entity\\\\MediaObject\\\")\\n     * @ORM\\\\JoinColumn(nullable=true)\\n     * @ApiProperty(iri=\\\"http://schema.org/image\\\")\\n     */</span>\\n    <span class=\\\"token keyword\\\">public</span> <span class=\\\"token variable\\\">$image</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>By sending a POST request to create a new book, linked with the previously\\nuploaded cover, you can have a nice illustrated book record!</p>\\n<p><code>POST /books</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">\\\"name\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"The name\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token property\\\">\\\"image\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"/media_objects/&lt;id>\\\"</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>Voila! You can now send files to your API, and link them to any other resources\\nin your app.</p>\"},\"navDoc\":{\"edges\":[{\"node\":{\"title\":\"The Distribution\",\"path\":\"distribution\",\"items\":[{\"id\":\"index\",\"title\":\"Creating a Fully Featured API in 5 Minutes\",\"anchors\":null},{\"id\":\"testing\",\"title\":\"Testing and Specifying the API\",\"anchors\":null}]}},{\"node\":{\"title\":\"The API Component\",\"path\":\"core\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":null},{\"id\":\"getting-started\",\"title\":\"Getting Started\",\"anchors\":[{\"id\":\"installing-api-platform-core\",\"title\":\"Installing API Platform Core\"},{\"id\":\"before-reading-this-documentation\",\"title\":\"Before Reading this Documentation\"},{\"id\":\"mapping-the-entities\",\"title\":\"Mapping the Entities\"}]},{\"id\":\"configuration\",\"title\":\"Configuration\",\"anchors\":null},{\"id\":\"operations\",\"title\":\"Operations\",\"anchors\":[{\"id\":\"enabling-and-disabling-operations\",\"title\":\"Enabling and Disabling Operations\"},{\"id\":\"configuring-operations\",\"title\":\"Configuring Operations\"},{\"id\":\"subresources\",\"title\":\"Subresources\"},{\"id\":\"creating-custom-operations-and-controllers\",\"title\":\"Creating Custom Operations and Controllers\"}]},{\"id\":\"default-order\",\"title\":\"Overriding Default Order\",\"anchors\":null},{\"id\":\"filters\",\"title\":\"Filters\",\"anchors\":[{\"id\":\"doctrine-orm-filters\",\"title\":\"Doctrine ORM Filters\"},{\"id\":\"serializer-filters\",\"title\":\"Serializer Filters\"},{\"id\":\"creating-custom-filters\",\"title\":\"Creating Custom Filters\"},{\"id\":\"apifilter-annotation\",\"title\":\"ApiFilter Annotation\"}]},{\"id\":\"serialization\",\"title\":\"The Serialization Process\",\"anchors\":[{\"id\":\"overall-process\",\"title\":\"Overall Process\"},{\"id\":\"available-serializers\",\"title\":\"Available Serializers\"},{\"id\":\"the-serialization-context-groups-and-relations\",\"title\":\"The Serialization Context, Groups and Relations\"},{\"id\":\"using-serialization-groups\",\"title\":\"Using Serialization Groups\"},{\"id\":\"using-different-serialization-groups-per-operation\",\"title\":\"Using Different Serialization Groups per Operation\"},{\"id\":\"changing-the-serialization-context-dynamically\",\"title\":\"Changing the Serialization Context Dynamically\"},{\"id\":\"changing-the-serialization-context-on-a-per-item-basis\",\"title\":\"Changing the Serialization Context on a Per Item Basis\"},{\"id\":\"name-conversion\",\"title\":\"Name Conversion\"},{\"id\":\"decorating-a-serializer-and-add-extra-data\",\"title\":\"Decorating a Serializer and Add Extra Data\"},{\"id\":\"entity-identifier-case\",\"title\":\"Entity Identifier Case\"},{\"id\":\"embedding-the-json-ld-context\",\"title\":\"Embedding the JSON-LD Context\"}]},{\"id\":\"validation\",\"title\":\"Validation\",\"anchors\":[{\"id\":\"using-validation-groups\",\"title\":\"Using Validation Groups\"},{\"id\":\"dynamic-validation-groups\",\"title\":\"Dynamic Validation Groups\"},{\"id\":\"error-levels-and-payload-serialization\",\"title\":\"Error Levels and Payload Serialization\"}]},{\"id\":\"errors\",\"title\":\"Error Handling\",\"anchors\":[{\"id\":\"converting-php-exceptions-to-http-errors\",\"title\":\"Converting PHP Exceptions to HTTP Errors\"}]},{\"id\":\"pagination\",\"title\":\"Pagination\",\"anchors\":[{\"id\":\"disabling-the-pagination\",\"title\":\"Disabling the Pagination\"},{\"id\":\"changing-the-number-of-items-per-page\",\"title\":\"Changing the Number of Items per Page\"},{\"id\":\"partial-pagination\",\"title\":\"Partial Pagination\"}]},{\"id\":\"events\",\"title\":\"The Event System\",\"anchors\":null},{\"id\":\"content-negotiation\",\"title\":\"Content Negotiation\",\"anchors\":[{\"id\":\"enabling-several-formats\",\"title\":\"Enabling Several Formats\"},{\"id\":\"registering-a-custom-serializer\",\"title\":\"Registering a Custom Serializer\"},{\"id\":\"creating-a-responder\",\"title\":\"Creating a Responder\"},{\"id\":\"writing-a-custom-normalizer\",\"title\":\"Writing a Custom Normalizer\"}]},{\"id\":\"external-vocabularies\",\"title\":\"Using External JSON-LD Vocabularies\",\"anchors\":null},{\"id\":\"extending-jsonld-context\",\"title\":\"Extending JSON-LD context\",\"anchors\":null},{\"id\":\"data-providers\",\"title\":\"Data Providers\",\"anchors\":[{\"id\":\"custom-collection-data-provider\",\"title\":\"Custom Collection Data Provider\"},{\"id\":\"custom-item-data-provider\",\"title\":\"Custom Item Data Provider\"},{\"id\":\"injecting-the-serializer-in-an-itemdataprovider\",\"title\":\"Injecting the Serializer in an \\\"ItemDataProvider\\\"\"}]},{\"id\":\"extensions\",\"title\":\"Extensions\",\"anchors\":[{\"id\":\"custom-extension\",\"title\":\"Custom Extension\"},{\"id\":\"example\",\"title\":\"Filter upon the current user\"}]},{\"id\":\"security\",\"title\":\"Security\",\"anchors\":null},{\"id\":\"performance\",\"title\":\"Performance\",\"anchors\":[{\"id\":\"enabling-the-builtin-http-cache-invalidation-system\",\"title\":\"Enabling the Built-in HTTP Cache Invalidation System\"},{\"id\":\"enabling-the-metadata-cache\",\"title\":\"Enabling the Metadata Cache\"},{\"id\":\"using-ppm-php-pm\",\"title\":\"Using PPM (PHP-PM)\"},{\"id\":\"doctrine-queries-and-indexes\",\"title\":\"Doctrine Queries and Indexes\"}]},{\"id\":\"operation-path-naming\",\"title\":\"Operation Path Naming\",\"anchors\":[{\"id\":\"configuration\",\"title\":\"Configuration\"},{\"id\":\"create-a-custom-operation-path-resolver\",\"title\":\"Create a Custom Operation Path Naming\"}]},{\"id\":\"form-data\",\"title\":\"Accept application/x-www-form-urlencoded Form Data\",\"anchors\":null},{\"id\":\"fosuser-bundle\",\"title\":\"FOSUserBundle Integration\",\"anchors\":[{\"id\":\"installing-the-bundle\",\"title\":\"Installing the Bundle\"},{\"id\":\"enabling-the-bridge\",\"title\":\"Enabling the Bridge\"},{\"id\":\"creating-a-user-entity-with-serialization-groups\",\"title\":\"Creating a \\\"User\\\" Entity with Serialization Groups\"}]},{\"id\":\"jwt\",\"title\":\"Adding a JWT authentication using LexikJWTAuthenticationBundle\",\"anchors\":[{\"id\":\"testing-with-swagger\",\"title\":\"Testing with Swagger\"},{\"id\":\"testing-with-behat\",\"title\":\"Testing with Behat\"}]},{\"id\":\"nelmio-api-doc\",\"title\":\"NelmioApiDocBundle integration\",\"anchors\":null},{\"id\":\"angularjs-integration\",\"title\":\"AngularJS Integration\",\"anchors\":[{\"id\":\"restangular\",\"title\":\"Restangular\"},{\"id\":\"ng-admin\",\"title\":\"ng-admin\"}]},{\"id\":\"swagger\",\"title\":\"Swagger Support\",\"anchors\":[{\"id\":\"override-swagger-documentation\",\"title\":\"Override Swagger documentation\"}]},{\"id\":\"graphql\",\"title\":\"GraphQL Support\",\"anchors\":[{\"id\":\"overall-view\",\"title\":\"Overall View\"},{\"id\":\"enabling-graphql\",\"title\":\"Enabling GraphQL\"},{\"id\":\"graphiql\",\"title\":\"GraphiQL\"}]},{\"id\":\"dto\",\"title\":\"Handling Data Transfer Objects (DTOs)\",\"anchors\":null},{\"id\":\"file-upload\",\"title\":\"Handling File Upload with VichUploaderBundle\",\"anchors\":null}]}},{\"node\":{\"title\":\"The Schema Generator Component\",\"path\":\"schema-generator\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":null},{\"id\":\"getting-started\",\"title\":\"Getting Started\",\"anchors\":null},{\"id\":\"configuration\",\"title\":\"Configuration\",\"anchors\":null}]}},{\"node\":{\"title\":\"The Admin Component\",\"path\":\"admin\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":[{\"id\":\"features\",\"title\":\"Features\"}]},{\"id\":\"getting-started\",\"title\":\"Getting Started\",\"anchors\":[{\"id\":\"installation\",\"title\":\"Installation\"},{\"id\":\"creating-the-admin\",\"title\":\"Creating the Admin\"},{\"id\":\"customizing-the-admin\",\"title\":\"Customizing the Admin\"}]},{\"id\":\"authentication-support\",\"title\":\"Authentication Support\",\"anchors\":null},{\"id\":\"handling-relations-to-collections\",\"title\":\"Handling Relations to Collections\",\"anchors\":[{\"id\":\"using-an-autocomplete-input-for-relations\",\"title\":\"Using an Autocomplete Input for Relations\"}]}]}},{\"node\":{\"title\":\"The Client Generator Component\",\"path\":\"client-generator\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":[{\"id\":\"features\",\"title\":\"Features\"}]},{\"id\":\"react\",\"title\":\"React generator\",\"anchors\":null},{\"id\":\"vuejs\",\"title\":\"Vue.js generator\",\"anchors\":null},{\"id\":\"troubleshooting\",\"title\":\"Troubleshooting\",\"anchors\":null}]}},{\"node\":{\"title\":\"Deployment\",\"path\":\"deployment\",\"items\":[{\"id\":\"index\",\"title\":\"Introduction\",\"anchors\":null},{\"id\":\"kubernetes\",\"title\":\"Deploying to a Kubernetes Cluster\",\"anchors\":null},{\"id\":\"heroku\",\"title\":\"Deploying an API Platform App on Heroku\",\"anchors\":null}]}},{\"node\":{\"title\":\"Extra\",\"path\":\"extra\",\"items\":[{\"id\":\"releases\",\"title\":\"The Release Process\",\"anchors\":null},{\"id\":\"philosophy\",\"title\":\"The Project's Philosophy\",\"anchors\":null},{\"id\":\"troubleshooting\",\"title\":\"Troubleshooting\",\"anchors\":null},{\"id\":\"contribution-guides\",\"title\":\"Contribution Guides\",\"anchors\":null},{\"id\":\"conduct\",\"title\":\"Contributor Code Of Conduct\",\"anchors\":null}]}}]}},\"pathContext\":{\"path\":\"docs/core/file-upload\",\"current\":{\"path\":\"docs/core/file-upload\",\"title\":\"The API Component - Handling File Upload with VichUploaderBundle\"},\"prev\":{\"path\":\"docs/core/dto\",\"title\":\"Handling Data Transfer Objects (DTOs)\",\"rootPath\":\"The API Component\"},\"next\":{\"path\":\"docs/schema-generator/index\",\"title\":\"The Schema Generator Component - Introduction\"}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/docs-core-file-upload.json\n// module id = 404\n// module chunks = 270716658481872"],"sourceRoot":""}